{"version":3,"file":"static/webpack/static\\development\\pages\\connections.js.d3483c3ddc316427d5b6.hot-update.js","sources":["webpack:///./components/Coach.js","webpack:///./components/CoachConnectionRequests.js"],"sourcesContent":["import React, {Component} from \"react\";\r\nimport firebase from \"../components/firebase\";\r\nimport Router from 'next/router';\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport Button from '@material-ui/core/Button';\r\nimport \"../styling/style.css\"\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\n\r\n\r\n\r\nclass Coach extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.sendInterest = this.sendInterest.bind(this);\r\n        this.state = {\"showDialog\": false};\r\n        this.handleDialogClose = this.handleDialogClose.bind(this);\r\n        this.handleResumeClick = this.handleResumeClick.bind(this);\r\n\r\n    }\r\n\r\n    handleDialogClose(event) {\r\n        event.preventDefault();\r\n        this.setState({\"showDialog\": false});\r\n    }\r\n\r\n\r\n    handleResumeClick(event,resume){\r\n        event.preventDefault();\r\n        console.log(\"resume\",resume);\r\n        try {\r\n            Router.push(resume);\r\n        }\r\n        catch(e){\r\n            console.log(\"couldn't process request\");\r\n        }\r\n    }\r\n\r\n    sendInterest(event) {\r\n        event.preventDefault();\r\n\r\n        if (this.props.coachid !== this.props.userid) {\r\n            const dbRef = firebase.firestore().collection(\"Connections\").doc(this.props.userid + \"_\" + this.props.coachid).set({\r\n                \"user\": this.props.userid,\r\n                \"coach\": this.props.coachid,\r\n                \"status\": \"USER_CALL_REQUEST\"\r\n\r\n            }).then(() => {\r\n                this.setState({\"showDialog\": true});\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        console.log(this.props.name + \"'s id is \" + this.props.id);\r\n        let dialogShow;\r\n        if (this.state.showDialog) {\r\n            dialogShow = <>\r\n                <Dialog open={this.state.showDialog} onClose={this.handleDialogClose}>\r\n                    <DialogTitle>Your Request Has Been Sent </DialogTitle>\r\n                    <DialogContent>\r\n                        <DialogContentText>\r\n                            This coach will respond after reviewing your profile\r\n                        </DialogContentText>\r\n                    </DialogContent>\r\n                </Dialog>\r\n\r\n            </>\r\n        }\r\n\r\n        return (\r\n            <>\r\n                {dialogShow}\r\n                <div className=\"card\" style={{\"justifyContent\":\"space-between\"}}>\r\n\r\n                    <div className=\"heading-2\">\r\n                        {this.props.name}\r\n                    </div>\r\n\r\n                    <div className=\"subheading-2\">\r\n                        {this.props.company +\", \"+this.props.location}\r\n                    </div>\r\n\r\n                    <br/><br/>\r\n\r\n                    <div className=\"paragraph\">\r\n                        {this.props.bio}\r\n                    </div>\r\n\r\n                    <br/><br/>\r\n\r\n                    <Button color=\"primary\" onClick={(event)=>{this.handleResumeClick(event,this.props.resume)}}>\r\n                        View Resume\r\n                    </Button>\r\n\r\n                    <br/>\r\n\r\n                    <button className=\"coach-button\" onClick={this.sendInterest}>\r\n                        Connect\r\n                    </button>\r\n\r\n\r\n                </div>\r\n            </>\r\n\r\n\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\nexport default Coach;","import React, {Component} from \"react\";\r\nimport firebase from \"./firebase\";\r\nimport \"../styling/style.css\"\r\nimport Coach from \"../components/Coach\"\r\nimport Button from \"@material-ui/core/Button/Button\";\r\nimport Router from 'next/router';\r\n\r\n\r\nclass CoachConnectionRequests extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            \"cards\": [],\r\n            \"loaded\": false\r\n        };\r\n\r\n        this.connectionStatus = {\r\n            USER_CALL_REQUEST: \"Approve Call Request\",\r\n            COACH_MEETING: \"Send ISA Request\",\r\n            ISA_REQUEST: \"Send ISA Request\",\r\n            ISA_APPROVED: \"Approved ISA\"\r\n        };\r\n\r\n        this.getDoc = this.getDoc.bind(this);\r\n        this.makeCard = this.makeCard.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleResumeClick = this.handleResumeClick.bind(this);\r\n\r\n    }\r\n\r\n    getButtonValue(status){\r\n        if(status === \"USER_CALL_REQUEST\"){\r\n            return \"Send Calendly Link\"\r\n        }\r\n        else if(status===\"COACH_MEETING\"){\r\n            return \"Sent Calendly Link\"\r\n        }\r\n        else if(status===\"ISA_REQUEST\"){\r\n            return \"Sent ISA Request\"\r\n        }\r\n        else if(status===\"ISA_APPROVED\"){\r\n            return \"ISA Approved. The Exchange team will be in touch with next steps\"\r\n        }\r\n    }\r\n\r\n    handleResumeClick(event,resume){\r\n        event.preventDefault();\r\n        try {\r\n            Router.push(resume);\r\n        }\r\n        catch(e){\r\n            console.log(\"couldn't process request\");\r\n        }\r\n    }\r\n\r\n    handleClick(event, status, userDoc) {\r\n\r\n        event.preventDefault();\r\n\r\n        if (status === \"USER_CALL_REQUEST\") {\r\n            //when clicked send calendly link to user\r\n            const coachID = this.props.user.uid;\r\n            const userID = userDoc.id;\r\n            const fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\r\n                \"status\": \"COACH_MEETING\"\r\n            }, {merge: true});\r\n\r\n        }\r\n        else if (status === \"COACH_MEETING\") {\r\n\r\n            //when clicked send isa request\r\n            const coachID = this.props.user.uid;\r\n            const userID = userDoc.id;\r\n            const fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\r\n                \"status\": \"ISA_REQUEST\"\r\n            }, {merge: true});\r\n\r\n\r\n        }\r\n        else if (status === \"ISA_APPROVED\") {\r\n\r\n            //Show ISA has been approved\r\n\r\n        }\r\n\r\n    }\r\n\r\n    async getDoc(userList) {\r\n        for (let i = 0; i < userList.length; i++) {\r\n            const doc = await firebase.firestore().collection(\"Profiles\").doc(userList[i].user).get();\r\n            this.state.cards.push(this.makeCard(doc.data().displayName, doc.data().schoolcompany, userList[i].status, doc.data().bio, doc));\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        let userList = [];\r\n\r\n        const callReqRef = firebase.firestore().collection(\"Connections\").where(\"coach\", \"==\", this.props.user.uid).get()\r\n            .then((snapShot) => {\r\n                snapShot.forEach((doc) => {\r\n                    const obj = {\r\n                        \"coach\": doc.data().coach,\r\n                        \"user\": doc.data().user,\r\n                        \"status\": doc.data().status\r\n                    };\r\n                    userList.push(obj);\r\n                });\r\n\r\n                this.getDoc(userList).then(() => {\r\n                    this.setState({\"loaded\": true});\r\n                })\r\n            })\r\n\r\n\r\n    }\r\n\r\n    makeCard(heading, subheading, status, paragraph, userDoc) {\r\n\r\n        let button =\r\n            <button className=\"coach-button\" onClick={(event) => this.handleClick(event, status, userDoc)}>\r\n                {this.connectionStatus[status]}\r\n            </button>;\r\n\r\n        if (status === \"ISA_REQUEST\" || status===\"ISA_APPROVED\") {\r\n            button = <br/>\r\n        }\r\n\r\n        return (<div className=\"card\" style={{\"justifyContent\":\"space-around\"}} key={userDoc.id}>\r\n\r\n                <div className=\"heading-2\">\r\n                    {heading}\r\n                </div>\r\n\r\n                <div className=\"subheading-2\">\r\n                    {subheading}\r\n                </div>\r\n                <div style={{color:\"green\"}}className=\"subheading-2\">\r\n                    {this.getButtonValue(status)}\r\n                </div>\r\n\r\n                <div className=\"paragraph\">\r\n                    {paragraph}\r\n                </div>\r\n                <br/>\r\n                <Button color=\"primary\" onClick={(event)=>{this.handleResumeClick(event,userDoc.resume)}}>\r\n                    View Resume\r\n                </Button>\r\n\r\n                {button}\r\n\r\n            </div>\r\n        );\r\n\r\n\r\n    }\r\n\r\n    render(){\r\n        if (this.state.loaded) {\r\n            return (\r\n                <>{this.state.cards}</>\r\n            );\r\n        }\r\n        else {\r\n            return <br/>\r\n        }\r\n    }\r\n}\r\n\r\nexport default CoachConnectionRequests;\r\n"],"mappings":"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","sourceRoot":""}
{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\santh\\\\WebstormProjects\\\\ExchangeTrain\\\\pages\\\\profile.js\";\nimport React, { Component } from \"react\";\nimport firebase from \"../components/firebase\";\nimport Router from 'next/router';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from '@material-ui/core/Button';\n\nvar Profile =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Profile, _Component);\n\n  function Profile(props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Profile).call(this, props));\n    _this.state = {\n      \"user\": null,\n      \"loaded\": false,\n      \"displayName\": \"\",\n      \"bio\": \"\"\n    };\n    _this.handleChange = _this.handleChange.bind(_assertThisInitialized(_this));\n    _this.loadedProfile = _this.loadedProfile.bind(_assertThisInitialized(_this));\n    _this.editProfile = _this.editProfile.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"handleChange\",\n    value: function handleChange(event) {\n      event.preventDefault();\n      var nameVal = event.target.name;\n      var valueVal = event.target.value;\n      this.setState(_defineProperty({}, nameVal, valueVal));\n    }\n  }, {\n    key: \"loadedProfile\",\n    value: function loadedProfile(user, displayName, bio) {\n      this.setState({\n        \"user\": user,\n        \"loaded\": true,\n        \"displayName\": displayName,\n        \"bio\": bio\n      });\n    }\n  }, {\n    key: \"editProfile\",\n    value: function editProfile(event) {\n      var _this2 = this;\n\n      event.preventDefault();\n      var dbRef = firebase.firestore().collection(\"Profiles\").doc(this.state.user.uid).set({\n        \"displayName\": this.state.displayName,\n        \"bio\": this.state.bio\n      }).then(function () {\n        console.log(\"written\");\n\n        _this2.loadedProfile(_this2.state.user, _this2.state.displayName, _this2.state, bio);\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"getUserProfile\",\n    value: function getUserProfile(user) {\n      var _this3 = this;\n\n      var db = firebase.firestore();\n      var docRef = db.collection(\"Profiles\").doc(user.uid);\n      docRef.get().then(function (doc) {\n        if (doc.exists) {\n          console.log(doc);\n\n          _this3.loadedProfile(user, \"\", \"\");\n        } else {\n          console.log(\"no document\");\n\n          _this3.loadedProfile(user, \"\", \"\");\n        }\n      })[\"catch\"](function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this4 = this;\n\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          console.log(\"user\");\n          console.log(user);\n\n          _this4.getUserProfile(user);\n        } else {\n          _this4.setState({\n            \"loaded\": true,\n            \"user\": null\n          });\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loaded) {\n        if (this.state.user) {\n          return React.createElement(\"form\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91\n            },\n            __self: this\n          }, React.createElement(\"input\", {\n            name: \"displayName\",\n            placeholder: \"Name\",\n            value: this.state.displayName,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 94\n            },\n            __self: this\n          }), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            },\n            __self: this\n          }), React.createElement(\"br\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 101\n            },\n            __self: this\n          }), React.createElement(\"input\", {\n            name: \"bio\",\n            placeholder: \"Bio\",\n            value: this.state.bio,\n            onChange: this.handleChange,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 102\n            },\n            __self: this\n          }), React.createElement(\"button\", {\n            onClick: this.editProfile,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 111\n            },\n            __self: this\n          }, \"Edit\"));\n        } else {\n          return React.createElement(\"h1\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }, \"Not logged in\");\n        }\n      } else {\n        return React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, \"Loading\");\n      }\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nexport default Profile;","map":{"version":3,"sources":["C:\\Users\\santh\\WebstormProjects\\ExchangeTrain\\pages\\profile.js"],"names":["React","Component","firebase","Router","TextField","Button","Profile","props","state","handleChange","bind","loadedProfile","editProfile","event","preventDefault","nameVal","target","name","valueVal","value","setState","user","displayName","bio","dbRef","firestore","collection","doc","uid","set","then","console","log","error","db","docRef","get","exists","auth","onAuthStateChanged","getUserProfile","loaded"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport firebase from \"../components/firebase\";\r\nimport Router from 'next/router';\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\nclass Profile extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\"user\": null, \"loaded\": false, \"displayName\": \"\", \"bio\": \"\"};\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.loadedProfile = this.loadedProfile.bind(this);\r\n        this.editProfile = this.editProfile.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        event.preventDefault();\r\n        const nameVal = event.target.name;\r\n        const valueVal = event.target.value;\r\n        this.setState({[nameVal]: valueVal})\r\n    }\r\n\r\n    loadedProfile(user,displayName, bio) {\r\n        this.setState({\"user\":user,\"loaded\": true, \"displayName\": displayName, \"bio\": bio});\r\n\r\n    }\r\n\r\n    editProfile(event) {\r\n        event.preventDefault();\r\n        const dbRef = firebase.firestore().collection(\"Profiles\").doc(this.state.user.uid).set({\r\n            \"displayName\": this.state.displayName,\r\n            \"bio\": this.state.bio\r\n        }).then( () => {\r\n            console.log(\"written\");\r\n            this.loadedProfile(this.state.user,this.state.displayName,this.state,bio);\r\n        }).catch(function (error) {\r\n            console.log(error);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    getUserProfile(user) {\r\n        const db = firebase.firestore();\r\n        const docRef = db.collection(\"Profiles\").doc(user.uid);\r\n        docRef.get().then((doc) => {\r\n            if (doc.exists) {\r\n                console.log(doc);\r\n                this.loadedProfile(user,\"\", \"\")\r\n\r\n            }\r\n            else {\r\n                console.log(\"no document\");\r\n                this.loadedProfile(user,\"\", \"\")\r\n\r\n            }\r\n        }).catch(function (error) {\r\n            console.log(error);\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        firebase.auth().onAuthStateChanged((user) => {\r\n\r\n            if (user) {\r\n                console.log(\"user\");\r\n                console.log(user);\r\n                this.getUserProfile(user);\r\n\r\n            }\r\n            else {\r\n                this.setState({\"loaded\": true, \"user\": null});\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        if (this.state.loaded) {\r\n\r\n            if (this.state.user) {\r\n                return (\r\n                    <form>\r\n\r\n\r\n                        <input\r\n\r\n                            name=\"displayName\"\r\n                            placeholder=\"Name\"\r\n                            value={this.state.displayName}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                        <br/><br/>\r\n                        <input\r\n\r\n                            name=\"bio\"\r\n                            placeholder=\"Bio\"\r\n                            value={this.state.bio}\r\n                            onChange={this.handleChange}\r\n                        />\r\n\r\n\r\n                        <button onClick={this.editProfile}>\r\n                            Edit\r\n                        </button>\r\n\r\n                    </form>\r\n\r\n\r\n                );\r\n            }\r\n            else {\r\n                return (<h1>Not logged in</h1>)\r\n\r\n            }\r\n        }\r\n        else {\r\n            return (<h1>Loading</h1>)\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}
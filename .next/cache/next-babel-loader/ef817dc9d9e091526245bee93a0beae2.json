{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\santh\\\\WebstormProjects\\\\ExchangeTrain\\\\components\\\\UserConnectionRequests.js\";\nimport React, { Component } from \"react\";\nimport firebase from \"../components/firebase\";\nimport Router from 'next/router';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from '@material-ui/core/Button';\nimport \"../styling/style.css\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport redirect from \"nextjs-redirect\";\n\nclass UserConnectionRequests extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"cards\": [],\n      \"loaded\": false\n    };\n    this.connectionStatus = {\n      USER_CALL_REQUEST: \"Call Request Sent\",\n      COACH_MEETING: \"Schedule Call\",\n      ISA_REQUEST: \"Coach Interested in ISA\",\n      ISA_APPROVED: \"Accepted ISA\"\n    };\n    this.getDoc = this.getDoc.bind(this);\n    this.makeCard = this.makeCard.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.handleResumeClick = this.handleResumeClick.bind(this);\n  }\n\n  handleResumeClick(event, resume) {\n    event.preventDefault();\n\n    try {\n      console.log(\"resume link\", resume);\n      Router.push(resume);\n    } catch (e) {\n      console.log(\"can't forward\");\n    }\n  }\n\n  handleClick(event, status, fullDoc) {\n    event.preventDefault();\n\n    if (status === \"USER_CALL_REQUEST\") {//do Nothing\n    } else if (status === \"COACH_MEETING\") {\n      //Redirect to calendly link\n      const calendlyLink = fullDoc.data().calendlylink;\n      console.log(\"calendly link, \" + calendlyLink);\n      Router.push(calendlyLink);\n    } else if (status === \"ISA_REQUEST\") {\n      //go into ISA agreement\n      const userID = this.props.user.uid;\n      const coachID = fullDoc.id;\n      const fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\n        \"status\": \"ISA_APPROVED\"\n      }, {\n        merge: true\n      });\n    }\n  }\n\n  async getDoc(coachesList) {\n    for (let i = 0; i < coachesList.length; i++) {\n      const doc = await firebase.firestore().collection(\"Profiles\").doc(coachesList[i].coach).get();\n      this.state.cards.push(this.makeCard(doc.data().displayName, doc.data().schoolcompany, coachesList[i].status, doc.data().bio, doc));\n    }\n  }\n\n  componentDidMount() {\n    let coachesList = [];\n    const callReqRef = firebase.firestore().collection(\"Connections\").where(\"user\", \"==\", this.props.user.uid).get().then(snapShot => {\n      snapShot.forEach(doc => {\n        const obj = {\n          \"coach\": doc.data().coach,\n          \"user\": doc.data().user,\n          \"status\": doc.data().status\n        };\n        coachesList.push(obj);\n      });\n      this.getDoc(coachesList).then(() => {\n        this.setState({\n          \"loaded\": true\n        });\n      });\n    });\n  }\n\n  getButtonValue(status) {\n    if (status === \"COACH_MEETING\") {\n      return \"Click To Schedule\";\n    } else if (status === \"ISA_REQUEST\") {\n      return \"Accept ISA\";\n    }\n  }\n\n  makeCard(heading, subheading, status, paragraph, coachDoc) {\n    let button = React.createElement(\"button\", {\n      className: \"coach-button\",\n      onClick: event => this.handleClick(event, status, coachDoc),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, this.getButtonValue(status));\n\n    if (status === \"USER_CALL_REQUEST\" || status === \"ISA_APPROVED\") {\n      button = React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      });\n    }\n\n    return React.createElement(\"div\", {\n      className: \"card\",\n      style: {\n        \"justifyContent\": \"space-around\"\n      },\n      key: coachDoc.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"heading-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, heading), React.createElement(\"div\", {\n      className: \"subheading-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, subheading), React.createElement(\"div\", {\n      style: {\n        color: \"green\"\n      },\n      className: \"subheading-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, this.connectionStatus[status]), React.createElement(\"div\", {\n      className: \"paragraph\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, paragraph), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }), React.createElement(Button, {\n      color: \"primary\",\n      onClick: event => {\n        this.handleResumeClick(event, coachDoc.resume);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"View Resume\"), button);\n  }\n\n  render() {\n    if (this.state.loaded) {\n      return React.createElement(React.Fragment, null, this.state.cards);\n    } else {\n      return React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      });\n    }\n  }\n\n}\n\nexport default UserConnectionRequests;","map":{"version":3,"sources":["C:\\Users\\santh\\WebstormProjects\\ExchangeTrain\\components\\UserConnectionRequests.js"],"names":["React","Component","firebase","Router","TextField","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","redirect","UserConnectionRequests","constructor","props","state","connectionStatus","USER_CALL_REQUEST","COACH_MEETING","ISA_REQUEST","ISA_APPROVED","getDoc","bind","makeCard","handleClick","handleResumeClick","event","resume","preventDefault","console","log","push","e","status","fullDoc","calendlyLink","data","calendlylink","userID","user","uid","coachID","id","fb","firestore","collection","doc","set","merge","coachesList","i","length","coach","get","cards","displayName","schoolcompany","bio","componentDidMount","callReqRef","where","then","snapShot","forEach","obj","setState","getButtonValue","heading","subheading","paragraph","coachDoc","button","color","render","loaded"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport firebase from \"../components/firebase\";\r\nimport Router from 'next/router';\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport Button from '@material-ui/core/Button';\r\nimport \"../styling/style.css\"\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport redirect from \"nextjs-redirect\"\r\n\r\nclass UserConnectionRequests extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            \"cards\": [],\r\n            \"loaded\": false\r\n        };\r\n\r\n        this.connectionStatus = {\r\n            USER_CALL_REQUEST: \"Call Request Sent\",\r\n            COACH_MEETING: \"Schedule Call\",\r\n            ISA_REQUEST: \"Coach Interested in ISA\",\r\n            ISA_APPROVED: \"Accepted ISA\"\r\n        };\r\n\r\n        this.getDoc = this.getDoc.bind(this);\r\n        this.makeCard = this.makeCard.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleResumeClick = this.handleResumeClick.bind(this);\r\n    }\r\n\r\n    handleResumeClick(event,resume){\r\n        event.preventDefault();\r\n        try {\r\n            console.log(\"resume link\", resume);\r\n            Router.push(resume);\r\n        }\r\n        catch(e){\r\n            console.log(\"can't forward\");\r\n        }\r\n    }\r\n\r\n    handleClick(event, status, fullDoc) {\r\n\r\n        event.preventDefault();\r\n\r\n        if (status === \"USER_CALL_REQUEST\") {\r\n            //do Nothing\r\n\r\n        }\r\n        else if (status === \"COACH_MEETING\") {\r\n\r\n            //Redirect to calendly link\r\n            const calendlyLink = fullDoc.data().calendlylink;\r\n            console.log(\"calendly link, \"+calendlyLink);\r\n            Router.push(calendlyLink);\r\n\r\n\r\n        }\r\n        else if (status === \"ISA_REQUEST\") {\r\n            //go into ISA agreement\r\n\r\n            const userID = this.props.user.uid;\r\n            const coachID = fullDoc.id;\r\n            const fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\r\n                \"status\": \"ISA_APPROVED\"\r\n            }, {merge: true});\r\n\r\n        }\r\n\r\n    }\r\n\r\n    async getDoc(coachesList) {\r\n        for (let i = 0; i < coachesList.length; i++) {\r\n            const doc = await firebase.firestore().collection(\"Profiles\").doc(coachesList[i].coach).get();\r\n            this.state.cards.push(this.makeCard(doc.data().displayName, doc.data().schoolcompany, coachesList[i].status, doc.data().bio, doc));\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        let coachesList = [];\r\n\r\n        const callReqRef = firebase.firestore().collection(\"Connections\").where(\"user\", \"==\", this.props.user.uid).get()\r\n            .then((snapShot) => {\r\n                snapShot.forEach((doc) => {\r\n                    const obj = {\r\n                        \"coach\":doc.data().coach,\r\n                        \"user\":doc.data().user,\r\n                        \"status\":doc.data().status\r\n                    };\r\n                    coachesList.push(obj);\r\n                });\r\n\r\n                this.getDoc(coachesList).then(() => {\r\n                    this.setState({\"loaded\": true});\r\n                })\r\n            })\r\n\r\n\r\n    }\r\n\r\n    getButtonValue(status){\r\n        if(status === \"COACH_MEETING\"){\r\n            return \"Click To Schedule\"\r\n        }\r\n        else if(status===\"ISA_REQUEST\"){\r\n            return \"Accept ISA\"\r\n        }\r\n    }\r\n\r\n    makeCard(heading, subheading, status, paragraph, coachDoc) {\r\n\r\n        let button =\r\n            <button className=\"coach-button\" onClick={(event) => this.handleClick(event, status, coachDoc)}>\r\n                {this.getButtonValue(status)}\r\n            </button>;\r\n\r\n        if (status === \"USER_CALL_REQUEST\" || status===\"ISA_APPROVED\") {\r\n            button = <br/>\r\n        }\r\n\r\n        return (\r\n            <div className=\"card\" style={{\"justifyContent\":\"space-around\"}} key={coachDoc.id}>\r\n\r\n                <div className=\"heading-2\">\r\n                    {heading}\r\n                </div>\r\n\r\n                <div className=\"subheading-2\">\r\n                    {subheading}\r\n                </div>\r\n                <div style={{color:\"green\"}} className=\"subheading-2\">\r\n                    {this.connectionStatus[status]}\r\n                </div>\r\n\r\n                <div className=\"paragraph\">\r\n                    {paragraph}\r\n                </div>\r\n                <br/>\r\n                <Button color=\"primary\" onClick={(event)=>{this.handleResumeClick(event,coachDoc.resume)}}>\r\n                    View Resume\r\n                </Button>\r\n\r\n                {button}\r\n\r\n            </div>\r\n        );\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.state.loaded) {\r\n            return (\r\n                <>{this.state.cards}</>\r\n            );\r\n        }\r\n        else {\r\n            return <br/>\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default UserConnectionRequests;"]},"metadata":{},"sourceType":"module"}
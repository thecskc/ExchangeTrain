{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\santh\\\\WebstormProjects\\\\ExchangeTrain\\\\components\\\\UserConnectionRequests.js\";\nimport React, { Component } from \"react\";\nimport firebase from \"../components/firebase\";\nimport Router from 'next/router';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from '@material-ui/core/Button';\nimport \"../styling/style.css\";\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport redirect from \"nextjs-redirect\";\n\nvar UserConnectionRequests =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserConnectionRequests, _Component);\n\n  function UserConnectionRequests(props) {\n    var _this;\n\n    _classCallCheck(this, UserConnectionRequests);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserConnectionRequests).call(this, props));\n    _this.state = {\n      \"cards\": [],\n      \"loaded\": false\n    };\n    _this.connectionStatus = {\n      USER_CALL_REQUEST: \"Call Request Sent\",\n      COACH_MEETING: \"Call Request Approved\",\n      ISA_REQUEST: \"ISA Request\",\n      ISA_APPROVED: \"Approved ISA\"\n    };\n    _this.getDoc = _this.getDoc.bind(_assertThisInitialized(_this));\n    _this.makeCard = _this.makeCard.bind(_assertThisInitialized(_this));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(UserConnectionRequests, [{\n    key: \"handleClick\",\n    value: function handleClick(event, status, fullDoc) {\n      event.preventDefault();\n\n      if (status === \"USER_CALL_REQUEST\") {//do Nothing\n      } else if (status === \"COACH_MEETING\") {\n        //Redirect to calendly link\n        var calendlyLink = fullDoc.data().calendlylink;\n        console.log(\"calendly link, \" + calendlyLink);\n        Router.push(calendlyLink);\n      } else if (status === \"ISA_REQUEST\") {\n        //go into ISA agreement\n        var userID = this.props.user.uid;\n        var coachID = fullDoc.id;\n        var fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\n          \"status\": \"ISA_APPROVED\"\n        }, {\n          merge: true\n        });\n      }\n    }\n  }, {\n    key: \"getDoc\",\n    value: function () {\n      var _getDoc = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(coachesList) {\n        var i, doc;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                i = 0;\n\n              case 1:\n                if (!(i < coachesList.length)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 4;\n                return firebase.firestore().collection(\"Profiles\").doc(coachesList[i].coach).get();\n\n              case 4:\n                doc = _context.sent;\n                this.state.cards.push(this.makeCard(doc.data().displayName, doc.data().schoolcompany, coachesList[i].status, doc.data().bio, doc));\n\n              case 6:\n                i++;\n                _context.next = 1;\n                break;\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getDoc(_x) {\n        return _getDoc.apply(this, arguments);\n      }\n\n      return getDoc;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var coachesList = [];\n      var callReqRef = firebase.firestore().collection(\"Connections\").where(\"user\", \"==\", this.props.user.uid).get().then(function (snapShot) {\n        snapShot.forEach(function (doc) {\n          var obj = {\n            \"coach\": doc.data().coach,\n            \"user\": doc.data().user,\n            \"status\": doc.data().status\n          };\n          coachesList.push(obj);\n        });\n\n        _this2.getDoc(coachesList).then(function () {\n          _this2.setState({\n            \"loaded\": true\n          });\n        });\n      });\n    }\n  }, {\n    key: \"makeCard\",\n    value: function makeCard(heading, subheading, status, paragraph, coachDoc) {\n      var _this3 = this;\n\n      var button = React.createElement(\"button\", {\n        onClick: function onClick(event) {\n          return _this3.handleClick(event, status, coachDoc);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 97\n        },\n        __self: this\n      }, this.connectionStatus[status]);\n\n      if (status === \"USER_CALL_REQUEST\") {\n        button = React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"card\",\n        key: coachDoc.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 105\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"heading-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }, heading), React.createElement(\"div\", {\n        className: \"subheading-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, subheading), React.createElement(\"div\", {\n        className: \"subheading-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, this.connectionStatus[status]), React.createElement(\"div\", {\n        className: \"paragraph\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, paragraph), button);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.loaded) {\n        return React.createElement(React.Fragment, null, this.state.cards);\n      } else {\n        return React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 138\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return UserConnectionRequests;\n}(Component);\n\nexport default UserConnectionRequests;","map":{"version":3,"sources":["C:\\Users\\santh\\WebstormProjects\\ExchangeTrain\\components\\UserConnectionRequests.js"],"names":["React","Component","firebase","Router","TextField","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","redirect","UserConnectionRequests","props","state","connectionStatus","USER_CALL_REQUEST","COACH_MEETING","ISA_REQUEST","ISA_APPROVED","getDoc","bind","makeCard","handleClick","event","status","fullDoc","preventDefault","calendlyLink","data","calendlylink","console","log","push","userID","user","uid","coachID","id","fb","firestore","collection","doc","set","merge","coachesList","i","length","coach","get","cards","displayName","schoolcompany","bio","callReqRef","where","then","snapShot","forEach","obj","setState","heading","subheading","paragraph","coachDoc","button","loaded"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport firebase from \"../components/firebase\";\r\nimport Router from 'next/router';\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport Button from '@material-ui/core/Button';\r\nimport \"../styling/style.css\"\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport redirect from \"nextjs-redirect\"\r\n\r\nclass UserConnectionRequests extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            \"cards\": [],\r\n            \"loaded\": false\r\n        };\r\n\r\n        this.connectionStatus = {\r\n            USER_CALL_REQUEST: \"Call Request Sent\",\r\n            COACH_MEETING: \"Call Request Approved\",\r\n            ISA_REQUEST: \"ISA Request\",\r\n            ISA_APPROVED: \"Approved ISA\"\r\n        };\r\n\r\n        this.getDoc = this.getDoc.bind(this);\r\n        this.makeCard = this.makeCard.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n    }\r\n\r\n    handleClick(event, status, fullDoc) {\r\n\r\n        event.preventDefault();\r\n\r\n        if (status === \"USER_CALL_REQUEST\") {\r\n            //do Nothing\r\n\r\n        }\r\n        else if (status === \"COACH_MEETING\") {\r\n\r\n            //Redirect to calendly link\r\n            const calendlyLink = fullDoc.data().calendlylink;\r\n            console.log(\"calendly link, \"+calendlyLink);\r\n            Router.push(calendlyLink);\r\n\r\n\r\n        }\r\n        else if (status === \"ISA_REQUEST\") {\r\n            //go into ISA agreement\r\n\r\n            const userID = this.props.user.uid;\r\n            const coachID = fullDoc.id;\r\n            const fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\r\n                \"status\": \"ISA_APPROVED\"\r\n            }, {merge: true});\r\n\r\n        }\r\n\r\n    }\r\n\r\n    async getDoc(coachesList) {\r\n        for (let i = 0; i < coachesList.length; i++) {\r\n            const doc = await firebase.firestore().collection(\"Profiles\").doc(coachesList[i].coach).get();\r\n            this.state.cards.push(this.makeCard(doc.data().displayName, doc.data().schoolcompany, coachesList[i].status, doc.data().bio, doc));\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n\r\n        let coachesList = [];\r\n\r\n        const callReqRef = firebase.firestore().collection(\"Connections\").where(\"user\", \"==\", this.props.user.uid).get()\r\n            .then((snapShot) => {\r\n                snapShot.forEach((doc) => {\r\n                    const obj = {\r\n                        \"coach\":doc.data().coach,\r\n                        \"user\":doc.data().user,\r\n                        \"status\":doc.data().status\r\n                    };\r\n                    coachesList.push(obj);\r\n                });\r\n\r\n                this.getDoc(coachesList).then(() => {\r\n                    this.setState({\"loaded\": true});\r\n                })\r\n            })\r\n\r\n\r\n    }\r\n\r\n    makeCard(heading, subheading, status, paragraph, coachDoc) {\r\n\r\n        let button =\r\n            <button onClick={(event) => this.handleClick(event, status, coachDoc)}>\r\n                {this.connectionStatus[status]}\r\n            </button>;\r\n\r\n        if (status === \"USER_CALL_REQUEST\") {\r\n            button = <br/>\r\n        }\r\n\r\n        return (<div className=\"card\" key={coachDoc.id}>\r\n\r\n                <div className=\"heading-2\">\r\n                    {heading}\r\n                </div>\r\n\r\n                <div className=\"subheading-2\">\r\n                    {subheading}\r\n                </div>\r\n                <div className=\"subheading-2\">\r\n                    {this.connectionStatus[status]}\r\n                </div>\r\n\r\n                <div className=\"paragraph\">\r\n                    {paragraph}\r\n                </div>\r\n\r\n                {button}\r\n\r\n            </div>\r\n        );\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        if (this.state.loaded) {\r\n            return (\r\n                <>{this.state.cards}</>\r\n            );\r\n        }\r\n        else {\r\n            return <br/>\r\n        }\r\n\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default UserConnectionRequests;"]},"metadata":{},"sourceType":"module"}
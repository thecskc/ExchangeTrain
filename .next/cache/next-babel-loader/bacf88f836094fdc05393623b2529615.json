{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\santh\\\\WebstormProjects\\\\ExchangeTrain\\\\pages\\\\profile.js\";\nimport React, { Component } from \"react\";\nimport firebase from \"../components/firebase\";\nimport Router from 'next/router';\nimport TextField from \"@material-ui/core/TextField\";\nimport Button from '@material-ui/core/Button';\n\nclass Profile extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      \"user\": null,\n      \"loaded\": false,\n      \"displayName\": \"\",\n      \"bio\": \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.loadedProfile = this.loadedProfile.bind(this);\n    this.editProfile = this.editProfile.bind(this);\n  }\n\n  handleChange(event) {\n    event.preventDefault();\n    const nameVal = event.target.name;\n    const valueVal = event.target.value;\n    this.setState({\n      [nameVal]: valueVal\n    });\n  }\n\n  loadedProfile(user, displayName, bio) {\n    this.setState({\n      \"user\": user,\n      \"loaded\": true,\n      \"displayName\": displayName,\n      \"bio\": bio\n    });\n  }\n\n  editProfile(event) {\n    event.preventDefault();\n    const dbRef = firebase.firestore().collection(\"Profiles\").doc(this.state.user.uid).set({\n      \"displayName\": this.state.displayName,\n      \"bio\": this.state.bio\n    }).then(() => {\n      console.log(\"written\");\n      this.loadedProfile(this.state.user, this.state.displayName, this.state.bio);\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  getUserProfile(user) {\n    const db = firebase.firestore();\n    const docRef = db.collection(\"Profiles\").doc(user.uid);\n    docRef.get().then(doc => {\n      if (doc.exists) {\n        console.log(doc);\n        this.loadedProfile(user, \"\", \"\");\n      } else {\n        console.log(\"no document\");\n        this.loadedProfile(user, \"\", \"\");\n      }\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        console.log(\"user\");\n        console.log(user);\n        this.getUserProfile(user);\n      } else {\n        this.setState({\n          \"loaded\": true,\n          \"user\": null\n        });\n      }\n    });\n  }\n\n  render() {\n    if (this.state.loaded) {\n      if (this.state.user) {\n        return React.createElement(\"form\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"input\", {\n          name: \"displayName\",\n          placeholder: \"Name\",\n          value: this.state.displayName,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }), React.createElement(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }), React.createElement(\"input\", {\n          name: \"bio\",\n          placeholder: \"Bio\",\n          value: this.state.bio,\n          onChange: this.handleChange,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }), React.createElement(\"button\", {\n          onClick: this.editProfile,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        }, \"Edit\"));\n      } else {\n        return React.createElement(\"h1\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 121\n          },\n          __self: this\n        }, \"Not logged in\");\n      }\n    } else {\n      return React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }, \"Loading\");\n    }\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["C:\\Users\\santh\\WebstormProjects\\ExchangeTrain\\pages\\profile.js"],"names":["React","Component","firebase","Router","TextField","Button","Profile","constructor","props","state","handleChange","bind","loadedProfile","editProfile","event","preventDefault","nameVal","target","name","valueVal","value","setState","user","displayName","bio","dbRef","firestore","collection","doc","uid","set","then","console","log","catch","error","getUserProfile","db","docRef","get","exists","componentDidMount","auth","onAuthStateChanged","render","loaded"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport firebase from \"../components/firebase\";\r\nimport Router from 'next/router';\r\nimport TextField from \"@material-ui/core/TextField\"\r\nimport Button from '@material-ui/core/Button';\r\n\r\n\r\nclass Profile extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\"user\": null, \"loaded\": false, \"displayName\": \"\", \"bio\": \"\"};\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.loadedProfile = this.loadedProfile.bind(this);\r\n        this.editProfile = this.editProfile.bind(this);\r\n    }\r\n\r\n    handleChange(event) {\r\n        event.preventDefault();\r\n        const nameVal = event.target.name;\r\n        const valueVal = event.target.value;\r\n        this.setState({[nameVal]: valueVal})\r\n    }\r\n\r\n    loadedProfile(user,displayName, bio) {\r\n        this.setState({\"user\":user,\"loaded\": true, \"displayName\": displayName, \"bio\": bio});\r\n\r\n    }\r\n\r\n    editProfile(event) {\r\n        event.preventDefault();\r\n        const dbRef = firebase.firestore().collection(\"Profiles\").doc(this.state.user.uid).set({\r\n            \"displayName\": this.state.displayName,\r\n            \"bio\": this.state.bio\r\n        }).then( () => {\r\n            console.log(\"written\");\r\n            this.loadedProfile(this.state.user,this.state.displayName,this.state.bio);\r\n        }).catch(function (error) {\r\n            console.log(error);\r\n\r\n        });\r\n\r\n    }\r\n\r\n    getUserProfile(user) {\r\n        const db = firebase.firestore();\r\n        const docRef = db.collection(\"Profiles\").doc(user.uid);\r\n        docRef.get().then((doc) => {\r\n            if (doc.exists) {\r\n                console.log(doc);\r\n                this.loadedProfile(user,\"\", \"\")\r\n\r\n            }\r\n            else {\r\n                console.log(\"no document\");\r\n                this.loadedProfile(user,\"\", \"\")\r\n\r\n            }\r\n        }).catch(function (error) {\r\n            console.log(error);\r\n        })\r\n\r\n\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        firebase.auth().onAuthStateChanged((user) => {\r\n\r\n            if (user) {\r\n                console.log(\"user\");\r\n                console.log(user);\r\n                this.getUserProfile(user);\r\n\r\n            }\r\n            else {\r\n                this.setState({\"loaded\": true, \"user\": null});\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n\r\n    render() {\r\n\r\n        if (this.state.loaded) {\r\n\r\n            if (this.state.user) {\r\n                return (\r\n                    <form>\r\n\r\n\r\n                        <input\r\n\r\n                            name=\"displayName\"\r\n                            placeholder=\"Name\"\r\n                            value={this.state.displayName}\r\n                            onChange={this.handleChange}\r\n                        />\r\n                        <br/><br/>\r\n                        <input\r\n\r\n                            name=\"bio\"\r\n                            placeholder=\"Bio\"\r\n                            value={this.state.bio}\r\n                            onChange={this.handleChange}\r\n                        />\r\n\r\n\r\n                        <button onClick={this.editProfile}>\r\n                            Edit\r\n                        </button>\r\n\r\n                    </form>\r\n\r\n\r\n                );\r\n            }\r\n            else {\r\n                return (<h1>Not logged in</h1>)\r\n\r\n            }\r\n        }\r\n        else {\r\n            return (<h1>Loading</h1>)\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nvar _jsxFileName = \"C:\\\\Users\\\\santh\\\\WebstormProjects\\\\ExchangeTrain\\\\components\\\\CoachConnectionRequests.js\";\nvar __jsx = React.createElement;\nimport React, { Component } from \"react\";\nimport firebase from \"./firebase\";\nimport \"../styling/style.css\";\nimport Coach from \"../components/Coach\";\nimport Button from \"@material-ui/core/Button/Button\";\nimport Router from 'next/router';\nimport DialogComp from \"./DialogComp\";\n\nvar CoachConnectionRequests =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CoachConnectionRequests, _Component);\n\n  function CoachConnectionRequests(props) {\n    var _this;\n\n    _classCallCheck(this, CoachConnectionRequests);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(CoachConnectionRequests).call(this, props));\n    _this.state = {\n      \"cards\": [],\n      \"loaded\": false,\n      \"showDialog\": false,\n      \"dialogTitle\": \"\",\n      \"dialogContent\": \"\"\n    };\n    _this.connectionStatus = {\n      USER_CALL_REQUEST: \"Approve Call Request\",\n      COACH_MEETING: \"Send ISA Request\",\n      ISA_REQUEST: \"Send ISA Request\",\n      ISA_APPROVED: \"Approved ISA\"\n    };\n    _this.getDoc = _this.getDoc.bind(_assertThisInitialized(_this));\n    _this.makeCard = _this.makeCard.bind(_assertThisInitialized(_this));\n    _this.handleClick = _this.handleClick.bind(_assertThisInitialized(_this));\n    _this.handleResumeClick = _this.handleResumeClick.bind(_assertThisInitialized(_this));\n    _this.handleDialogClose = _this.handleDialogClose.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(CoachConnectionRequests, [{\n    key: \"getButtonValue\",\n    value: function getButtonValue(status) {\n      if (status === \"USER_CALL_REQUEST\") {\n        return \"Send Calendly Link\";\n      } else if (status === \"COACH_MEETING\") {\n        return \"Sent Calendly Link\";\n      } else if (status === \"ISA_REQUEST\") {\n        return \"Sent ISA Request\";\n      } else if (status === \"ISA_APPROVED\") {\n        return \"ISA Approved. The Exchange team will be in touch with next steps\";\n      }\n    }\n  }, {\n    key: \"handleDialogClose\",\n    value: function handleDialogClose() {\n      this.setState({\n        \"showDialog\": false\n      });\n    }\n  }, {\n    key: \"handleResumeClick\",\n    value: function handleResumeClick(event, resume) {\n      event.preventDefault();\n      console.log(resume); //Router.push(resume);\n      //window.location.href=resume;\n\n      window.open(resume); // try {\n      //     Router.replace(resume).catch(function(err){\n      //         console.log(err);\n      //     });\n      // }\n      // catch(e){\n      //     console.log(\"couldn't process request\");\n      // }\n    }\n  }, {\n    key: \"handleClick\",\n    value: function handleClick(event, status, userDoc) {\n      event.preventDefault();\n\n      if (status === \"USER_CALL_REQUEST\") {\n        //when clicked send calendly link to user\n        var coachID = this.props.user.uid;\n        var userID = userDoc.id;\n        var fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\n          \"status\": \"COACH_MEETING\"\n        }, {\n          merge: true\n        });\n        this.setState({\n          \"showDialog\": true,\n          \"dialogTitle\": \"Sent Calendly Link\",\n          \"dialogContent\": \"When the user schedules a call with you, \" + \"you will receive a notification\"\n        });\n      } else if (status === \"COACH_MEETING\") {\n        //when clicked send isa request\n        var _coachID = this.props.user.uid;\n        var _userID = userDoc.id;\n\n        var _fb = firebase.firestore().collection(\"Connections\").doc(_userID + \"_\" + _coachID).set({\n          \"status\": \"ISA_REQUEST\"\n        }, {\n          merge: true\n        });\n\n        this.setState({\n          \"showDialog\": true,\n          \"dialogTitle\": \"Sent ISA Request\",\n          \"dialogContent\": \"When the user accepts your ISA request, \" + \"the Exchange team will get in touch with further instructions.\"\n        });\n      } else if (status === \"ISA_APPROVED\") {//Show ISA has been approved\n      }\n    }\n  }, {\n    key: \"getDoc\",\n    value: function () {\n      var _getDoc = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(userList) {\n        var i, doc;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                i = 0;\n\n              case 1:\n                if (!(i < userList.length)) {\n                  _context.next = 9;\n                  break;\n                }\n\n                _context.next = 4;\n                return firebase.firestore().collection(\"Profiles\").doc(userList[i].user).get();\n\n              case 4:\n                doc = _context.sent;\n                this.state.cards.push(this.makeCard(doc.data().displayName, doc.data().schoolcompany, userList[i].status, doc.data().bio, doc));\n\n              case 6:\n                i++;\n                _context.next = 1;\n                break;\n\n              case 9:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getDoc(_x) {\n        return _getDoc.apply(this, arguments);\n      }\n\n      return getDoc;\n    }()\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var userList = [];\n      var callReqRef = firebase.firestore().collection(\"Connections\").where(\"coach\", \"==\", this.props.user.uid).get().then(function (snapShot) {\n        snapShot.forEach(function (doc) {\n          var obj = {\n            \"coach\": doc.data().coach,\n            \"user\": doc.data().user,\n            \"status\": doc.data().status\n          };\n          userList.push(obj);\n        });\n\n        _this2.getDoc(userList).then(function () {\n          _this2.setState({\n            \"loaded\": true\n          });\n        });\n      });\n    }\n  }, {\n    key: \"makeCard\",\n    value: function makeCard(heading, subheading, status, paragraph, userDoc) {\n      var _this3 = this;\n\n      var button = __jsx(\"button\", {\n        className: \"coach-button\",\n        onClick: function onClick(event) {\n          return _this3.handleClick(event, status, userDoc);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, this.connectionStatus[status]);\n\n      if (status === \"ISA_REQUEST\" || status === \"ISA_APPROVED\") {\n        button = __jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 158\n          },\n          __self: this\n        });\n      }\n\n      return __jsx(\"div\", {\n        className: \"card\",\n        style: {\n          \"justifyContent\": \"space-around\"\n        },\n        key: userDoc.id,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163\n        },\n        __self: this\n      }, __jsx(\"div\", {\n        className: \"heading-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164\n        },\n        __self: this\n      }, heading), __jsx(\"div\", {\n        className: \"subheading-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168\n        },\n        __self: this\n      }, subheading), __jsx(\"div\", {\n        style: {\n          color: \"green\"\n        },\n        className: \"subheading-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, this.getButtonValue(status))), __jsx(\"div\", {\n        className: \"paragraph\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      }, paragraph), __jsx(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }), __jsx(Button, {\n        color: \"primary\",\n        onClick: function onClick(event) {\n          _this3.handleResumeClick(event, userDoc.data().resume);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, \"View Resume\"), button);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var dialog = __jsx(DialogComp, {\n        dialog: this.state.showDialog,\n        title: this.state.dialogTitle,\n        content: this.state.dialogContent,\n        handleClose: this.handleDialogClose,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      });\n\n      if (this.state.loaded) {\n        return __jsx(React.Fragment, null, dialog, this.state.cards);\n      } else {\n        return __jsx(\"br\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return CoachConnectionRequests;\n}(Component);\n\nexport default CoachConnectionRequests;","map":{"version":3,"sources":["C:\\Users\\santh\\WebstormProjects\\ExchangeTrain\\components\\CoachConnectionRequests.js"],"names":["React","Component","firebase","Coach","Button","Router","DialogComp","CoachConnectionRequests","props","state","connectionStatus","USER_CALL_REQUEST","COACH_MEETING","ISA_REQUEST","ISA_APPROVED","getDoc","bind","makeCard","handleClick","handleResumeClick","handleDialogClose","status","setState","event","resume","preventDefault","console","log","window","open","userDoc","coachID","user","uid","userID","id","fb","firestore","collection","doc","set","merge","userList","i","length","get","cards","push","data","displayName","schoolcompany","bio","callReqRef","where","then","snapShot","forEach","obj","coach","heading","subheading","paragraph","button","color","getButtonValue","dialog","showDialog","dialogTitle","dialogContent","loaded"],"mappings":"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","sourcesContent":["import React, {Component} from \"react\";\r\nimport firebase from \"./firebase\";\r\nimport \"../styling/style.css\"\r\nimport Coach from \"../components/Coach\"\r\nimport Button from \"@material-ui/core/Button/Button\";\r\nimport Router from 'next/router';\r\nimport DialogComp from \"./DialogComp\";\r\n\r\n\r\nclass CoachConnectionRequests extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            \"cards\": [],\r\n            \"loaded\": false,\r\n            \"showDialog\": false,\r\n            \"dialogTitle\": \"\",\r\n            \"dialogContent\": \"\"\r\n        };\r\n\r\n        this.connectionStatus = {\r\n            USER_CALL_REQUEST: \"Approve Call Request\",\r\n            COACH_MEETING: \"Send ISA Request\",\r\n            ISA_REQUEST: \"Send ISA Request\",\r\n            ISA_APPROVED: \"Approved ISA\"\r\n        };\r\n\r\n        this.getDoc = this.getDoc.bind(this);\r\n        this.makeCard = this.makeCard.bind(this);\r\n        this.handleClick = this.handleClick.bind(this);\r\n        this.handleResumeClick = this.handleResumeClick.bind(this);\r\n        this.handleDialogClose = this.handleDialogClose.bind(this);\r\n\r\n\r\n\r\n\r\n    }\r\n\r\n    getButtonValue(status) {\r\n        if (status === \"USER_CALL_REQUEST\") {\r\n            return \"Send Calendly Link\"\r\n        }\r\n        else if (status === \"COACH_MEETING\") {\r\n            return \"Sent Calendly Link\"\r\n        }\r\n        else if (status === \"ISA_REQUEST\") {\r\n            return \"Sent ISA Request\"\r\n        }\r\n        else if (status === \"ISA_APPROVED\") {\r\n            return \"ISA Approved. The Exchange team will be in touch with next steps\"\r\n        }\r\n    }\r\n    handleDialogClose(){\r\n        this.setState({\"showDialog\":false});\r\n    }\r\n\r\n    handleResumeClick(event, resume) {\r\n        event.preventDefault();\r\n        console.log(resume);\r\n        //Router.push(resume);\r\n        //window.location.href=resume;\r\n        window.open(resume);\r\n\r\n        // try {\r\n        //     Router.replace(resume).catch(function(err){\r\n        //         console.log(err);\r\n        //     });\r\n        // }\r\n        // catch(e){\r\n        //     console.log(\"couldn't process request\");\r\n        // }\r\n    }\r\n\r\n    handleClick(event, status, userDoc) {\r\n\r\n        event.preventDefault();\r\n\r\n        if (status === \"USER_CALL_REQUEST\") {\r\n            //when clicked send calendly link to user\r\n            const coachID = this.props.user.uid;\r\n            const userID = userDoc.id;\r\n            const fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\r\n                \"status\": \"COACH_MEETING\"\r\n            }, {merge: true});\r\n            this.setState({\r\n                \"showDialog\": true,\r\n                \"dialogTitle\": \"Sent Calendly Link\",\r\n                \"dialogContent\": \"When the user schedules a call with you, \" +\r\n                    \"you will receive a notification\"\r\n            });\r\n\r\n        }\r\n        else if (status === \"COACH_MEETING\") {\r\n\r\n            //when clicked send isa request\r\n            const coachID = this.props.user.uid;\r\n            const userID = userDoc.id;\r\n            const fb = firebase.firestore().collection(\"Connections\").doc(userID + \"_\" + coachID).set({\r\n                \"status\": \"ISA_REQUEST\"\r\n            }, {merge: true});\r\n\r\n            this.setState({\r\n                \"showDialog\": true,\r\n                \"dialogTitle\": \"Sent ISA Request\",\r\n                \"dialogContent\": \"When the user accepts your ISA request, \" +\r\n                    \"the Exchange team will get in touch with further instructions.\"\r\n            });\r\n\r\n        }\r\n        else if (status === \"ISA_APPROVED\") {\r\n\r\n            //Show ISA has been approved\r\n\r\n        }\r\n\r\n    }\r\n\r\n    async getDoc(userList) {\r\n        for (let i = 0; i < userList.length; i++) {\r\n            const doc = await firebase.firestore().collection(\"Profiles\").doc(userList[i].user).get();\r\n            this.state.cards.push(this.makeCard(doc.data().displayName, doc.data().schoolcompany, userList[i].status, doc.data().bio, doc));\r\n        }\r\n    }\r\n\r\n\r\n    componentDidMount() {\r\n\r\n        let userList = [];\r\n\r\n        const callReqRef = firebase.firestore().collection(\"Connections\").where(\"coach\", \"==\", this.props.user.uid).get()\r\n            .then((snapShot) => {\r\n                snapShot.forEach((doc) => {\r\n                    const obj = {\r\n                        \"coach\": doc.data().coach,\r\n                        \"user\": doc.data().user,\r\n                        \"status\": doc.data().status\r\n                    };\r\n                    userList.push(obj);\r\n                });\r\n\r\n                this.getDoc(userList).then(() => {\r\n                    this.setState({\"loaded\": true});\r\n                })\r\n            })\r\n\r\n\r\n    }\r\n\r\n    makeCard(heading, subheading, status, paragraph, userDoc) {\r\n\r\n        let button =\r\n            <button className=\"coach-button\" onClick={(event) => this.handleClick(event, status, userDoc)}>\r\n                {this.connectionStatus[status]}\r\n            </button>;\r\n\r\n        if (status === \"ISA_REQUEST\" || status === \"ISA_APPROVED\") {\r\n            button = <br/>\r\n        }\r\n\r\n        return (<div className=\"card\" style={{\"justifyContent\": \"space-around\"}} key={userDoc.id}>\r\n\r\n                <div>\r\n                    <div className=\"heading-2\">\r\n                        {heading}\r\n                    </div>\r\n\r\n                    <div className=\"subheading-2\">\r\n                        {subheading}\r\n                    </div>\r\n\r\n                    <div style={{color: \"green\"}} className=\"subheading-2\">\r\n                        {this.getButtonValue(status)}\r\n                    </div>\r\n                </div>\r\n\r\n\r\n                <div className=\"paragraph\">\r\n                    {paragraph}\r\n                </div>\r\n                <br/>\r\n                <Button color=\"primary\" onClick={(event) => {\r\n                    this.handleResumeClick(event, userDoc.data().resume)\r\n                }}>\r\n                    View Resume\r\n                </Button>\r\n\r\n                {button}\r\n\r\n            </div>\r\n        );\r\n\r\n\r\n    }\r\n\r\n    render() {\r\n\r\n        let dialog = <DialogComp dialog={this.state.showDialog} title={this.state.dialogTitle}\r\n                                 content={this.state.dialogContent} handleClose={this.handleDialogClose}/>\r\n        if (this.state.loaded) {\r\n            return (\r\n                <>{dialog}{this.state.cards}</>\r\n            );\r\n        }\r\n        else {\r\n            return <br/>\r\n        }\r\n    }\r\n}\r\n\r\nexport default CoachConnectionRequests;\r\n"]},"metadata":{},"sourceType":"module"}